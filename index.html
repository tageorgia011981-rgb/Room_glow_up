<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Glow Up</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000;
            font-family: serif;
        }

        #main-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Workspace Canvas */
        #room-canvas {
            position: relative;
            width: 800px;
            height: 600px;
            background-size: cover;
            background-position: center;
            border: 10px solid #222;
            z-index: 5;
            overflow: hidden;
        }

        /* Pull Tabs (png assets) */
        .pull-tab {
            position: absolute;
            cursor: pointer;
            z-index: 150;
            transition: transform 0.3s ease;
        }
        #catalog-tab { top: 0; left: 100px; width: 80px; }
        #save-checkout-tab { top: 0; right: 100px; width: 80px; }
        .pull-tab:hover { transform: translateY(10px); }

        /* Sidebar: Cabinet & Cases */
        .sidebar-asset {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 300px;
            height: auto;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 10;
        }
        .hidden { display: none; }
        .slide-left { transform: translateY(-50%) translateX(-150%); }

        /* Catalog Overlay (furniturecatalog.png) */
        #furniture-catalog {
            position: absolute;
            top: -110%;
            left: 50%;
            transform: translateX(-50%);
            width: 750px;
            height: 550px;
            z-index: 100;
            transition: top 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background-image: url('furniturecatalog.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        #furniture-catalog.open { top: 40px; }

        /* Item Preview Window */
        #item-preview {
            position: absolute;
            bottom: 20px;
            left: 20px;
            width: 180px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.9);
            border: 1.5px solid #ffd700;
            color: #fff;
            font-size: 12px;
            z-index: 110;
            display: none;
            pointer-events: none;
        }
        #item-preview img { width: 100%; margin-bottom: 5px; }

        /* Scroll Receipt */
        #scroll-receipt {
            position: absolute;
            top: -650px;
            right: 50px;
            width: 250px;
            height: 500px;
            background-image: url('scroll_receipt.png');
            background-size: 100% 100%;
            z-index: 140;
            transition: top 1s ease-in-out;
            padding: 60px 30px;
            box-sizing: border-box;
        }
        #scroll-receipt.rolled-out { top: 0; }
        .receipt-list { list-style: none; padding: 0; font-family: 'Courier New', monospace; font-size: 13px; color: #333; }

        /* Gallery Overlays */
        #gallery-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            z-index: 200;
            display: none;
            transition: transform 1.5s ease-in-out, opacity 1s;
        }
        .door-zone { position: absolute; top: 25%; left: 35%; width: 30%; height: 50%; cursor: pointer; }
        .zoom-in { transform: scale(4); opacity: 0; }
        #nav-arrow { position: absolute; bottom: 30px; right: 30px; width: 50px; cursor: pointer; z-index: 300; }

        /* Placed Furniture */
        .placed-furniture { position: absolute; cursor: move; user-select: none; }
    </style>
</head>
<body>

<div id="main-container">
    <img src="catalog_tab.png" id="catalog-tab" class="pull-tab" onclick="openCases()">
    <img src="save_tab.png" id="save-checkout-tab" class="pull-tab" onclick="toggleReceipt()">

    <div id="room-canvas"></div>

    <div id="scroll-receipt">
        <h3 style="text-align:center; font-size: 16px;">MANIFEST</h3>
        <ul id="item-list" class="receipt-list"></ul>
    </div>

    <div id="library-cabinet" class="sidebar-asset">
        <img src="cabinet.png" style="width:100%">
    </div>

    <div id="furniture-trunks" class="sidebar-asset hidden">
        <img src="furniturecases.png" style="width:100%">
        <div style="position:absolute; top:20%; left:40%; width:60px; height:90px; cursor:pointer;" onclick="showCatalog()"></div>
        <div style="position:absolute; top:40%; left:40%; width:60px; height:90px; cursor:pointer;" onclick="showCatalog()"></div>
    </div>

    <div id="furniture-catalog" 
         onmousemove="updatePreview(event)" 
         onmouseleave="hidePreview()" 
         ondblclick="addItemToRoom(event)">
        
        <div id="item-preview">
            <img id="preview-img" src="preview_sample.jpg">
            <div id="preview-name">Selected Item</div>
            <div id="preview-price">$0.00</div>
        </div>
    </div>

    <div id="gallery-overlay">
        <div id="door-click" class="door-zone hidden" onclick="triggerZoomEntry()"></div>
        <img id="nav-arrow" src="arrow.png" onclick="cycleGallery()">
    </div>
</div>

<script>
    const cabinet = document.getElementById('library-cabinet');
    const cases = document.getElementById('furniture-trunks');
    const catalog = document.getElementById('furniture-catalog');
    const receipt = document.getElementById('scroll-receipt');
    const itemList = document.getElementById('item-list');
    const canvas = document.getElementById('room-canvas');
    const gallery = document.getElementById('gallery-overlay');
    const doorClick = document.getElementById('door-click');
    const preview = document.getElementById('item-preview');

    let galleryIdx = 0;
    const gallerySequence = [
        'rain.jpg', 'rain2.jpg', 'inspo_gallerydoors.jpg', 
        'inspo_gallery1.jpg', 'inspo_gallery2.jpg', 'inspo_gallery3.jpg',
        'inspo_gallery4.jpg', 'inspo_gallery5.jpg', 'inspo_gallery6.jpg'
    ];

    function openCases() {
        cabinet.classList.add('slide-left');
        setTimeout(() => {
            cabinet.classList.add('hidden');
            cases.classList.remove('hidden');
        }, 800);
    }

    function showCatalog() {
        catalog.classList.add('open');
    }

    function toggleReceipt() {
        receipt.classList.toggle('rolled-out');
    }

    function updatePreview(e) {
        preview.style.display = 'block';
        document.getElementById('preview-name').textContent = "Bespoke Furniture";
        document.getElementById('preview-price').textContent = "$250.00";
    }

    function hidePreview() {
        preview.style.display = 'none';
    }

    function addItemToRoom(e) {
        const item = document.createElement('img');
        item.src = 'furniture_asset.png'; 
        item.className = 'placed-furniture';
        item.style.width = '120px';
        item.style.left = '200px';
        item.style.top = '200px';
        
        item.onmousedown = function(event) {
            let shiftX = event.clientX - item.getBoundingClientRect().left;
            let shiftY = event.clientY - item.getBoundingClientRect().top;
            function moveAt(pageX, pageY) {
                item.style.left = pageX - canvas.getBoundingClientRect().left - shiftX + 'px';
                item.style.top = pageY - canvas.getBoundingClientRect().top - shiftY + 'px';
            }
            function onMouseMove(event) { moveAt(event.clientX, event.clientY); }
            document.addEventListener('mousemove', onMouseMove);
            item.onmouseup = function() {
                document.removeEventListener('mousemove', onMouseMove);
            };
        };
        item.ondragstart = () => false;
        canvas.appendChild(item);

        const li = document.createElement('li');
        li.textContent = "â€¢ Bespoke Furniture - $250.00";
        itemList.appendChild(li);
    }

    function cycleGallery() {
        galleryIdx++;
        if (galleryIdx < gallerySequence.length) {
            gallery.style.backgroundImage = `url(${gallerySequence[galleryIdx]})`;
            if (gallerySequence[galleryIdx] === 'inspo_gallerydoors.jpg') {
                doorClick.classList.remove('hidden');
            } else {
                doorClick.classList.add('hidden');
            }
        }
    }

    function triggerZoomEntry() {
        gallery.classList.add('zoom-in');
        setTimeout(() => {
            galleryIdx++;
            gallery.classList.remove('zoom-in');
            gallery.style.backgroundImage = `url(${gallerySequence[galleryIdx]})`;
            doorClick.classList.add('hidden');
        }, 1500);
    }

    function startInspo() {
        gallery.style.display = 'block';
        gallery.style.backgroundImage = `url(${gallerySequence[0]})`;
    }
</script>

</body>
</html>
