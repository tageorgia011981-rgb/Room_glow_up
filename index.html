<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Room Glow Up</title>
<link href="https://fonts.googleapis.com/css2?family=Bonheur+Royale&family=Limelight&family=Bad+Script&family=Special+Elite&display=swap" rel="stylesheet">
<style>
/* --- COMPRESSED CSS FOR LENGTH --- */
* { box-sizing: border-box; }
body { margin: 0; padding: 0; min-height: 100vh; width: 100vw; display: flex; flex-direction: column; align-items: center; background-color: #008080; background-image: url('background10.jpg'); background-repeat: no-repeat; background-position: center top; background-attachment: fixed; background-size: contain; font-family: 'Special Elite', cursive; color: white; overflow-x: hidden; overflow-y: auto; user-select: none; }
.header-wrap { width: 100%; text-align: center; margin-top: 3rem; margin-bottom: 2rem; position: relative; z-index: 30; }
h1 { font-family: 'Bonheur Royale', cursive; font-size: clamp(4.5rem, 9vw, 7rem); line-height: 1.1; margin: 0; text-shadow: 3px 3px 10px rgba(0,0,0,0.7); font-weight: 400; }
h2 { font-family: 'Bad Script', cursive; font-size: clamp(1.6rem, 3.5vw, 2.4rem); margin-top: 0.5rem; margin-bottom: 0; text-shadow: 2px 2px 8px rgba(0,0,0,0.6); }
.tabs { display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap; width: 100%; padding: 2rem; position: relative; z-index: 30; }
.drawer-hardware { position: relative; width: 260px; height: 90px; background: linear-gradient(135deg, #8a6e4b 0%, #59442e 50%, #3e2b19 100%); border: 3px solid #2a1d12; box-shadow: inset 0 0 0 2px #a88860, inset 10px 0 20px rgba(0,0,0,0.8), 0 10px 15px rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; }
.drawer-hardware:hover { filter: brightness(1.15); transform: translateY(-4px); }
.drawer-hardware::before, .drawer-hardware::after { content: ''; position: absolute; top: 50%; transform: translateY(-50%); width: 14px; height: 14px; border-radius: 50%; background: radial-gradient(circle, #111 20%, #555 100%); box-shadow: inset 1px 1px 2px #000; } .drawer-hardware::before { left: 12px; } .drawer-hardware::after { right: 12px; }
.plate-style { width: 190px; height: 50px; background: linear-gradient(to bottom, #e6d3b3 0%, #c4a476 50%, #9e7e52 100%); color: #2a1d12; display: flex; align-items: center; justify-content: center; font-size: 15px; font-weight: 900; text-transform: uppercase; letter-spacing: 1px; border: 1px solid #5e4326; box-shadow: inset 0 2px 5px rgba(0,0,0,0.25); text-align: center; line-height: 1; }
.lip-pull { position: absolute; bottom: -14px; left: 50%; transform: translateX(-50%); width: 140px; height: 24px; background: linear-gradient(to bottom, #59442e, #2a1d12); border: 2px solid #1a1008; border-top: none; border-radius: 0 0 15px 15px; box-shadow: 0 5px 10px rgba(0,0,0,0.8); }

/* --- LAYOUT & ANIMATIONS (LOWERED TO 350px) --- */
.workspace-area { position: relative; width: 100%; max-width: 1400px; margin-top: 10vh; min-height: 1200px; display: flex; justify-content: center; }
/* Cabinet & Trunk lowered to 350px */
#cabinet-container { position: fixed; top: 350px; left: -500px; width: 350px; height: 600px; z-index: 20; transition: left 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
#cabinet-img { width: 100%; height: 100%; object-fit: fill; filter: drop-shadow(5px 5px 10px rgba(0,0,0,0.5)); }
.cabinet-drawer-zone { position: absolute; left: 10%; width: 80%; height: 18%; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 30; transition: transform 0.2s; }
.cabinet-drawer-zone:hover { transform: translateY(-3px); box-shadow: 0 0 20px rgba(255,215,0,0.3); } 
#zone-living { top: 2%; } #zone-bed { top: 20%; } #zone-dining { top: 38%; } #zone-extra { top: 56%; } #zone-upload { top: 74%; }
.pop-out-label { position: relative; width: 220px; height: 90px; background: linear-gradient(135deg, #8a6e4b 0%, #59442e 50%, #3e2b19 100%); border: 3px solid #2a1d12; box-shadow: inset 0 0 0 2px #a88860, inset 10px 0 20px rgba(0,0,0,0.8), 0 10px 15px rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; cursor: pointer; opacity: 0; transform: scale(0.5); transition: all 0.3s; pointer-events: none; }
.pop-out-label .plate-style { width: 160px; } .cabinet-drawer-zone:hover .pop-out-label { opacity: 1; transform: scale(1.1); box-shadow: 0 20px 30px rgba(0,0,0,0.6); }

#furniture-box { position: fixed; top: 350px; left: -500px; width: 400px; height: 700px; background: url('filefolderbox.png') no-repeat center center; background-size: 100% 100%; z-index: 40; transition: left 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
#trunk-back-btn { position: absolute; right: 20px; top: 20px; width: 50px; height: 50px; background: radial-gradient(circle, #e6d3b3 0%, #c4a476 100%); border: 3px solid #59442e; border-radius: 50%; box-shadow: 0 5px 10px rgba(0,0,0,0.5); cursor: pointer; display: flex; align-items: center; justify-content: center; color: #2a1d12; font-family: 'Limelight'; font-size: 10px; font-weight: bold; z-index: 60; }
.trunk-internal-zone { position: absolute; top: 15%; left: 10%; width: 80%; height: 70%; overflow-y: auto; overflow-x: hidden; display: flex; flex-wrap: wrap; justify-content: center; align-content: flex-start; gap: 15px; padding: 10px; }
.trunk-internal-zone::-webkit-scrollbar { width: 8px; } .trunk-internal-zone::-webkit-scrollbar-thumb { background: #c4a476; border-radius: 4px; }
.catalog-item { width: 120px; height: 130px; background: rgba(30, 20, 10, 0.85); border: 2px solid #c4a476; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 8px rgba(0,0,0,0.6); transition: transform 0.3s, box-shadow 0.3s, background 0.3s; opacity: 0; transform: translateY(50px); }
.catalog-item.active { opacity: 1; transform: translateY(0); }
.catalog-item:hover { transform: translateY(-5px) scale(1.05) !important; box-shadow: 0 0 15px #c4a476; background: rgba(60, 40, 20, 0.95); }
.catalog-icon-img { width: 60px; height: 60px; object-fit: contain; margin-bottom: 8px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.8)); }
.catalog-text { font-family: 'Bad Script', cursive; color: #e6d3b3; font-size: 1rem; text-align: center; line-height: 1; }

/* STAGE LOGIC */
#main-stage { width: 800px; height: 600px; border: 2px dashed rgba(255, 255, 255, 0.3); background-color: rgba(0, 0, 0, 0.6); position: relative; z-index: 10; margin-left: 0; transition: margin-left 1.2s ease-in-out; overflow: hidden; margin-top: 150px; /* Aligns with lower cabinet */ }
#room-display { width: 100%; height: 100%; object-fit: cover; display: none; cursor: pointer; }

/* STATE CONTROLS */
body.rooms-active #cabinet-container { left: 20px; }
body.rooms-active #furniture-box { left: -500px; }
body.rooms-active #main-stage { margin-left: 380px; } /* Slides Right */

body.furniture-mode #cabinet-container { left: -500px; }
body.furniture-mode #furniture-box { left: 20px; }
body.furniture-mode #main-stage { margin-left: 420px; } /* Slides Right for Trunk */

.stage-item-wrapper { position: absolute; cursor: move; display: inline-block; border: 2px solid transparent; z-index: 100; }
.stage-item-wrapper img { width: 100%; height: 100%; display: block; pointer-events: none; }
.stage-item-wrapper.selected { border: 2px dashed #9932CC; }
.resize-handle { width: 15px; height: 15px; background: #9932CC; position: absolute; bottom: -5px; right: -5px; cursor: se-resize; display: none; border-radius: 50%; }
.stage-item-wrapper.selected .resize-handle { display: block; }
#preview-box { position: absolute; top: 400px; left: 450px; width: 250px; height: 250px; background: white; border: 5px solid white; box-shadow: 0 10px 20px rgba(0,0,0,0.5); z-index: 70; display: none; pointer-events: none; }
#preview-img { width: 100%; height: 100%; object-fit: contain; }
</style>
</head>
<body> <div class="header-wrap">
  <h1>Room Glow Up</h1>
  <h2>Your Dream Space Come To Life</h2>
</div>

<div class="tabs">
  <div class="drawer-hardware" onclick="toggleRooms()"><div class="plate-style">Rooms</div><div class="lip-pull"></div></div>
  <div class="drawer-hardware" onclick="lockRoom()"><div class="plate-style">Furniture Catalog</div><div class="lip-pull"></div></div>
  <div class="drawer-hardware"><div class="plate-style">Inspirational<br>Look Book</div><div class="lip-pull"></div></div>
  <div class="drawer-hardware"><div class="plate-style">Save</div><div class="lip-pull"></div></div>
</div>

<div class="workspace-area">
    <div id="cabinet-container">
        <img id="cabinet-img" src="cabinet.png" alt="Cabinet">
        <div id="zone-living" class="cabinet-drawer-zone" onmouseenter="hoverRoom('livingroom')" onclick="nextVariation('livingroom')"><div class="pop-out-label"><div class="plate-style">Living Room</div><div class="lip-pull"></div></div></div>
        <div id="zone-bed" class="cabinet-drawer-zone" onmouseenter="hoverRoom('bedroom')" onclick="nextVariation('bedroom')"><div class="pop-out-label"><div class="plate-style">Bedroom</div><div class="lip-pull"></div></div></div>
        <div id="zone-dining" class="cabinet-drawer-zone" onmouseenter="hoverRoom('diningroom')" onclick="nextVariation('diningroom')"><div class="pop-out-label"><div class="plate-style">Dining Room</div><div class="lip-pull"></div></div></div>
        <div id="zone-extra" class="cabinet-drawer-zone" onmouseenter="hoverRoom('extrarooms')" onclick="nextVariation('extrarooms')"><div class="pop-out-label"><div class="plate-style">Extra Rooms</div><div class="lip-pull"></div></div></div>
        <div id="zone-upload" class="cabinet-drawer-zone" onclick="triggerUpload()"><div class="pop-out-label"><div class="plate-style">Upload</div><div class="lip-pull"></div></div></div>
    </div>

    <div id="main-stage">
        <img id="room-display" src="" alt="Room Design" onclick="lockRoom()">
    </div>
</div>

<div id="furniture-box">
    <div id="trunk-back-btn">BACK</div>
    <div id="trunk-internal-zone" class="trunk-internal-zone"></div>
</div>

<div id="preview-box"><img id="preview-img" src=""></div>
<input type="file" id="file-upload" accept="image/*" onchange="handleFileUpload(event)" style="display:none">

<script>
const trunkData = {
    level1: [
        { id: 'cat_seat', name: 'Seating', icon: 'iconseating.png', type: 'category', content: 'level2_seating' },
        { id: 'cat_table', name: 'Tables', icon: 'icontables.png', type: 'category', content: 'level2_tables' },
        { id: 'cat_store', name: 'Storage', icon: 'iconstorage.png', type: 'category', content: 'level2_storage' },
        { id: 'cat_bed', name: 'Beds', icon: 'iconbeds.png', type: 'category', content: 'level2_beds' }
    ],
    level2_seating: [
        { id: 'type_couch', name: 'Couches', icon: 'iconcouch.png', type: 'type', content: 'items_couches' },
        { id: 'type_arm', name: 'Armchairs', icon: 'iconarmchair.png', type: 'type', content: 'items_armchairs' },
        { id: 'type_bench', name: 'Benches', icon: 'iconbench.png', type: 'type', content: 'items_benches' },
        { id: 'type_stool', name: 'Stools', icon: 'iconstool.png', type: 'type', content: 'items_stools' }
    ],
    level2_tables: [
        { id: 'type_dtable', name: 'Dining Tables', icon: 'icondiningtable.png', type: 'type', content: 'items_dtables' },
        { id: 'type_etable', name: 'End Tables', icon: 'iconendtable.png', type: 'type', content: 'items_etables' }
    ],
    items_couches: [
        { id: '1001', name: 'Leather Sofa', image: 'couch1.png', type: 'item' },
        { id: '1002', name: 'Velvet Sofa', image: 'couch2.png', type: 'item' },
        { id: '1003', name: 'Modern Sofa', image: 'couch3.png', type: 'item' }
    ],
    items_armchairs: [
        { id: '2001', name: 'Wingback', image: 'armchair1.png', type: 'item' },
        { id: '2002', name: 'Club Chair', image: 'armchair2.png', type: 'item' }
    ]
};

const roomData = { 
    livingroom: ['livingroom.jpg', 'livingroom2.jpg'], 
    bedroom: ['bedroom.jpg', 'bedroom2.jpg'], 
    diningroom: ['diningroom.jpg', 'diningroom2.jpg'], 
    extrarooms: ['extrarooms.jpg', 'kitchen.jpg'] 
};
let currentCategory = 'livingroom'; let currentIndex = 0;
let currentLevel = 'level1'; let historyStack = [];

renderFiles(trunkData.level1);

// ROOM CYCLE LOGIC
function hoverRoom(category) {
    if (!document.body.classList.contains('furniture-mode')) {
        currentCategory = category; currentIndex = 0; updateStage();
    }
}
function nextVariation(category) {
    if (document.body.classList.contains('furniture-mode')) return;
    if (currentCategory !== category) { currentCategory = category; currentIndex = 0; }
    else { if(roomData[category]) currentIndex = (currentIndex + 1) % roomData[category].length; }
    updateStage();
}
function updateStage() {
    const img = document.getElementById('room-display');
    if(roomData[currentCategory]) {
        let src = Array.isArray(roomData[currentCategory]) ? roomData[currentCategory][currentIndex] : roomData[currentCategory];
        if(!src) src = 'livingroom.jpg';
        img.src = src; img.style.display = 'block';
    }
}

// SWAP LOGIC
function toggleRooms() {
    document.body.classList.remove('furniture-mode');
    document.body.classList.toggle('rooms-active'); // Toggles Cabinet ON/OFF
}
function lockRoom() {
    if(document.body.classList.contains('rooms-active')) {
        document.body.classList.remove('rooms-active');
        document.body.classList.add('furniture-mode');
    }
}
function triggerUpload() { document.getElementById('file-upload').click(); }

// TRUNK LOGIC
function renderFiles(dataArray) {
    const zone = document.getElementById('trunk-internal-zone');
    zone.innerHTML = ''; 
    document.getElementById('trunk-back-btn').onclick = goBackLevel;
    if(!dataArray) return;
    dataArray.forEach((item, index) => {
        const card = document.createElement('div'); card.className = 'catalog-item';
        const iconSrc = item.type === 'item' ? item.image : item.icon;
        card.innerHTML = `<img src="${iconSrc}" class="catalog-icon-img" onerror="this.src='iconseating.png'"><div class="catalog-text">${item.name}</div>`;
        if (item.type === 'item') {
            card.onmouseenter = () => showPreview(item.image); card.onmouseleave = () => hidePreview(); card.onclick = () => addFurnitureToStage(item);
        } else { card.onclick = () => navigateDown(item.content); }
        zone.appendChild(card); setTimeout(() => { card.classList.add('active'); }, 50 + (index * 50));
    });
}
function navigateDown(targetKey) {
    if(trunkData[targetKey]) { historyStack.push(currentLevel); currentLevel = targetKey; renderFiles(trunkData[targetKey]); }
}
function goBackLevel() {
    if(historyStack.length > 0) { currentLevel = historyStack.pop(); renderFiles(trunkData[currentLevel]); }
    else { toggleRooms(); }
}
function showPreview(imgSrc) {
    const box = document.getElementById('preview-box');
    document.getElementById('preview-img').src = imgSrc; box.style.display = 'block';
}
function hidePreview() { document.getElementById('preview-box').style.display = 'none'; }

// DRAG DROP
function addFurnitureToStage(item) {
    const stage = document.getElementById('main-stage');
    const wrapper = document.createElement('div'); wrapper.className = 'stage-item-wrapper';
    wrapper.style.width = '150px'; wrapper.style.height = '100px'; wrapper.style.left = '50px'; wrapper.style.top = '50px';
    wrapper.innerHTML = `<img src="${item.image}"><div class="resize-handle"></div>`;
    stage.appendChild(wrapper);
    makeDraggable(wrapper); makeResizable(wrapper, wrapper.querySelector('.resize-handle'));
    wrapper.onclick = (e) => { e.stopPropagation(); document.querySelectorAll('.stage-item-wrapper').forEach(el => el.classList.remove('selected')); wrapper.classList.add('selected'); };
    wrapper.ondblclick = () => wrapper.remove();
}
function makeDraggable(el) {
    let isDragging = false; let startX, startY, initialLeft, initialTop;
    el.onmousedown = function(e) {
        if(e.target.classList.contains('resize-handle')) return; 
        isDragging = true; startX = e.clientX; startY = e.clientY; initialLeft = el.offsetLeft; initialTop = el.offsetTop;
        document.addEventListener('mousemove', onMouseMove); document.addEventListener('mouseup', onMouseUp);
    };
    function onMouseMove(e) { if (!isDragging) return; el.style.left = `${initialLeft + (e.clientX - startX)}px`; el.style.top = `${initialTop + (e.clientY - startY)}px`; }
    function onMouseUp() { isDragging = false; document.removeEventListener('mousemove', onMouseMove); document.removeEventListener('mouseup', onMouseUp); }
}
function makeResizable(el, handle) {
    let isResizing = false; let startX, startY, startW, startH;
    handle.onmousedown = function(e) {
        e.stopPropagation(); isResizing = true; startX = e.clientX; startY = e.clientY;
        startW = parseInt(getComputedStyle(el).width); startH = parseInt(getComputedStyle(el).height);
        document.addEventListener('mousemove', onResizeMove); document.addEventListener('mouseup', onResizeUp);
    };
    function onResizeMove(e) { if (!isResizing) return; el.style.width = (startW + (e.clientX - startX)) + 'px'; el.style.height = (startH + (e.clientY - startY)) + 'px'; }
    function onResizeUp() { isResizing = false; document.removeEventListener('mousemove', onResizeMove); document.removeEventListener('mouseup', onResizeUp); }
}
function handleFileUpload(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const img = document.getElementById('room-display'); img.src = e.target.result; img.style.display = 'block';
            lockRoom();
        }
        reader.readAsDataURL(file);
    }
}
</script>
</body>
</html>
