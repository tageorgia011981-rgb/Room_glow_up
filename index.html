<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Glow Up - Master Build</title>
    <link href="https://fonts.googleapis.com/css2?family=Limelight&display=swap" rel="stylesheet">
    <style>
        :root {
            --metal-shine: linear-gradient(145deg, #e6e6e6, #8c8c8c, #4d4d4d, #000);
            --silver-header: linear-gradient(to bottom, #ffffff 0%, #a6a6a6 45%, #4d4d4d 50%, #ffffff 55%, #808080 100%);
            --glow-teal: #00f2ff;
        }

        body, html {
            margin: 0; padding: 0;
            background: url('Assets/mainbackground.jpg') no-repeat center center fixed;
            background-size: cover; scroll-behavior: smooth;
        }

        #site-anchor { width: 100%; display: flex; flex-direction: column; align-items: center; }

        header { text-align: center; padding: 100px 0 60px 0; }
        h1 { font-family: 'Limelight', cursive; font-size: 110px; margin: 0; background: var(--silver-header); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(5px 5px 8px #000); text-transform: uppercase; }
        h2 { font-family: 'Limelight', cursive; font-size: 40px; margin: 15px 0 0 0; color: #e0e0e0; text-shadow: 3px 3px 6px #000; letter-spacing: 2px; }

        .nav-row { display: flex; gap: 30px; margin-bottom: 100px; }

        /* --- VINTAGE LIBRARY PULLS (HIGH SPECIFICITY) --- */
        .library-tab { 
            width: 230px; height: 110px; background: var(--metal-shine); border: 2.5px solid #000; 
            display: flex; justify-content: center; align-items: center; cursor: pointer;
            box-shadow: 10px 15px 30px rgba(0,0,0,0.8); transition: 0.3s;
        }
        .white-insert { 
            width: 86%; height: 58%; background: #fff; display: flex; justify-content: center; 
            align-items: center; box-shadow: inset 4px 4px 10px rgba(0,0,0,0.5); transition: 0.4s; 
        }
        .library-tab:hover .white-insert { background: var(--glow-teal); box-shadow: inset 2px 2px 4px rgba(0,0,0,0.2), 0 0 35px var(--glow-teal); }
        .label-style { font-family: 'Courier New', monospace; font-weight: 900; font-size: 16px; color: #000; text-transform: uppercase; }

        /* --- STAGE FLOOR (STATIONARY ISLAND) --- */
        #stage-floor { display: flex; justify-content: center; align-items: flex-start; gap: 80px; width: 1700px; padding-bottom: 250px; position: relative; }
        .cabinet-tower { position: relative; width: 550px; height: 800px; }
        .cab-slide { position: absolute; top: 0; width: 100%; transform: translateX(-200%); transition: transform 2s cubic-bezier(0.23, 1, 0.32, 1); }
        .cab-slide.glided-in { transform: translateX(0); }
        .cab-slide.glided-out { transform: translateX(-200%); }

        .drawer-overlay { position: absolute; top: 135px; left: 100px; display: flex; flex-direction: column; gap: 26px; }
        .mini-pull { 
            width: 160px; height: 64px; background: var(--metal-shine); border: 2.5px solid #000; 
            display: flex; justify-content: center; align-items: center; cursor: pointer;
            box-shadow: 5px 5px 12px rgba(0,0,0,0.7); transition: 0.3s;
        }
        .mini-insert { width: 85%; height: 60%; background: #fff; display: flex; justify-content: center; align-items: center; font-family: 'Courier New'; font-weight: bold; font-size: 13px; text-transform: uppercase; box-shadow: inset 3px 3px 8px rgba(0,0,0,0.4); }
        .mini-pull:hover .mini-insert { background: var(--glow-teal); box-shadow: inset 2px 2px 4px rgba(0,0,0,0.2), 0 0 15px var(--glow-teal); }

        #theater { width: 950px; height: 650px; border: 35px solid #000; background: #000; box-shadow: 0 0 100px #000; position: relative; overflow: hidden; z-index: 5; }
        #room-display { width: 100%; height: 100%; background-size: cover; background-position: center; transition: 0.8s; }

        /* --- THE VAULT (ISLAND BELOW STAGE) --- */
        #vault-island { width: 100%; padding: 150px 0; display: flex; flex-direction: column; align-items: center; }
        #closet-box { width: 1250px; height: 850px; position: relative; perspective: 3000px; border: 15px solid #1a1a1a; overflow: hidden; }
        .vault-bg { position: absolute; width: 100%; height: 100%; transition: background-image 0.5s ease; background-size: cover; }
        
        .wing { position: absolute; width: 50%; height: 100%; transition: 1.8s; z-index: 500; cursor: pointer; }
        .wing-l { left: 0; transform-origin: left; } .wing-r { right: 0; transform-origin: right; }
        .wing img { width: 200%; height: 100%; object-fit: cover; }
        .wing-r img { object-position: right; }
        #closet-box.open .wing-l { transform: rotateY(-150deg); }
        #closet-box.open .wing-r { transform: rotateY(150deg); }

        /* ITEMS */
        .item-box { position: absolute; cursor: grab; z-index: 1000; transition: transform 0.3s; }
        .item-box img { width: 100%; height: auto; pointer-events: none; }
        
        /* Perspective Shift for Rugs on Floor */
        .rug-f { width: 500px !important; height: 250px !important; transform: rotateX(65deg) !important; filter: drop-shadow(0 30px 40px #000); }
    </style>
</head>
<body>

<div id="site-anchor">
    <header>
        <h1>Room Glow Up</h1>
        <h2>Where Your Dream Space Comes To Life</h2>
    </header>

    <nav class="nav-row">
        <div class="library-tab" onclick="reveal('rooms-cab')"><div class="white-insert"><span class="label-style">Rooms</span></div></div>
        <div class="library-tab" onclick="reveal('furn-cab')"><div class="white-insert"><span class="label-style">Furniture</span></div></div>
        <div class="library-tab" onclick="jumpToVault()"><div class="white-insert"><span class="label-style">Decor Closet</span></div></div>
    </nav>

    <section id="stage-floor">
        <div class="cabinet-tower">
            <div id="rooms-cab" class="cab-slide">
                <img src="Assets/cabinet.png" style="width:100%">
                <div class="drawer-overlay">
                    <div class="mini-pull" onmouseover="pre('livingroom')" onclick="cyc('livingroom')"><div class="mini-insert">Living Room</div></div>
                    <div class="mini-pull" onmouseover="pre('bedroom')" onclick="cyc('bedroom')"><div class="mini-insert">Bedroom</div></div>
                    <div class="mini-pull" onmouseover="pre('extra')" onclick="cyc('extra')"><div class="mini-insert">Extra Rooms</div></div>
                </div>
            </div>
            <div id="furn-cab" class="cab-slide">
                <img src="Assets/furniturecases.png" style="width:100%">
                <div class="drawer-overlay">
                    <div class="mini-pull"><div class="mini-insert">Sofas</div></div>
                    <div class="mini-pull"><div class="mini-insert">Tables</div></div>
                    <div class="mini-pull"><div class="mini-insert">Rugs</div></div>
                </div>
            </div>
        </div>
        <div id="theater"><div id="room-display" onclick="lock()"></div></div>
    </section>

    <section id="vault-island">
        <div id="closet-box">
            <div class="wing wing-l" onclick="this.parentElement.classList.toggle('open')"><img src="Assets/closetdoors.jpg"></div>
            <div class="wing wing-r" onclick="this.parentElement.classList.toggle('open')"><img src="Assets/closetdoors.jpg"></div>
            
            <div id="vault-view" class="vault-bg" style="background-image: url('Assets/decorclosetbackground.jpg');">
                </div>

            <div style="position:absolute; bottom:30px; left:50%; transform:translateX(-50%); display:flex; gap:15px; z-index:600;">
                <div class="mini-pull" onclick="loadShelf(1)"><div class="mini-insert">Shelf 1</div></div>
                <div class="mini-pull" onclick="loadShelf(2)"><div class="mini-insert">Shelf 2</div></div>
                <div class="mini-pull" onclick="loadShelf(3)"><div class="mini-insert">Shelf 3</div></div>
            </div>
        </div>
    </section>
</div>

<script>
    const inventory = {
        shelf1: [{ id: 'rug1', src: 'Assets/rug1.png', x: 400, y: 200, type: 'rug' }],
        shelf2: [], // Placeholder for Shelf 2
        shelf3: [
            { id: 'purple-jar', src: 'Assets/purplejar.png', x: 50, y: 380, type: 'decor' },
            { id: 'leather-pillow', src: 'Assets/leatherpillow.png', x: 580, y: 260, type: 'pillow' },
            { id: 'green-throw', src: 'Assets/greenthrow.png', x: 800, y: 680, type: 'throw' }
        ]
    };

    function loadShelf(num) {
        const vault = document.getElementById('vault-view');
        const img = num === 1 ? 'decorclosetbackground.jpg' : num === 2 ? 'decorshelves2.jpg' : 'decorshelves3.jpg';
        vault.style.backgroundImage = `url('Assets/${img}')`;
        
        // Clear old items and render new ones
        vault.querySelectorAll('.item-box').forEach(el => el.remove());
        const items = inventory[`shelf${num}`] || [];
        items.forEach(item => {
            const div = document.createElement('div');
            div.className = `item-box ${item.type}`;
            div.style.left = item.x + 'px';
            div.style.top = item.y + 'px';
            div.dataset.ox = item.x; div.dataset.oy = item.y;
            div.innerHTML = `<img src="${item.src}" style="width:100px;">`;
            div.ondblclick = () => teleport(div);
            vault.appendChild(div);
        });
    }

    function jumpToVault() { window.scrollTo({ top: document.getElementById('vault-island').offsetTop, behavior: 'smooth' }); }
    
    function teleport(el) {
        const stage = document.getElementById('theater');
        const vault = document.getElementById('vault-view');
        if (el.parentElement === vault) {
            stage.appendChild(el);
            el.style.top = "300px"; el.style.left = "300px";
            if (el.classList.contains('rug')) el.classList.add('rug-f');
            window.scrollTo({ top: stage.offsetTop - 50, behavior: 'smooth' });
        } else {
            vault.appendChild(el);
            el.classList.remove('rug-f');
            el.style.top = el.dataset.oy + "px"; el.style.left = el.dataset.ox + "px";
        }
    }

    let drag = null;
    document.addEventListener('mousedown', (e) => { 
        const target = e.target.closest('.item-box');
        if (target && target.parentElement.id === "theater") drag = target; 
    });
    document.addEventListener('mousemove', (e) => {
        if (drag) {
            const rect = document.getElementById('theater').getBoundingClientRect();
            drag.style.left = (e.clientX - rect.left - (drag.offsetWidth/2)) + "px";
            drag.style.top = (e.clientY - rect.top - (drag.offsetHeight/2)) + "px";
        }
    });
    document.addEventListener('mouseup', () => drag = null);

    // Init
    loadShelf(1);
</script>
</body>
</html>
