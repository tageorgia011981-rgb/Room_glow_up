<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Glow Up</title>
    <link href="https://fonts.googleapis.com/css2?family=Limelight&family=Special+Elite&display=swap" rel="stylesheet">
    <style>
        /* --- RESET & BODY --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0f1011; 
            background-image: url("background_color.jpg");
            background-size: cover;
            background-attachment: fixed;
            min-height: 100vh;
            font-family: 'Special Elite', cursive;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
        }

        /* --- HEADER & GLOWING TABS --- */
        .site-header { text-align: center; padding: 25px 0 15px; display: flex; flex-direction: column; align-items: center; }
        .brand-title { 
            font-family: 'Limelight', cursive; font-size: clamp(35px, 6vw, 65px); text-transform: uppercase;
            background: linear-gradient(to bottom, #2c2e30 0%, #8e9196 25%, #ffffff 50%, #8e9196 75%, #161719 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; 
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.5)); z-index: 100;
        }
        .sub-title { font-family: 'Limelight', cursive; font-size: 16px; color: rgba(255, 255, 255, 0.4); text-transform: uppercase; letter-spacing: 12px; margin-top: -10px; z-index: 5; }

        /* --- NAVIGATION --- */
        .vintage-tabs { display: flex; gap: 15px; justify-content: center; padding: 15px 0; z-index: 500; }
        .top-nav-tab {
            position: relative; width: 180px; height: 85px; 
            background: linear-gradient(135deg,#2c2e30 0%,#0f1011 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer;
            clip-path: polygon(0% 20%,8% 20%,8% 0%,92% 0%,92% 20%,100% 20%,100% 80%,92% 80%,92% 100%,8% 100%,8% 80%,0% 80%);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2), 6px 8px 20px rgba(0,0,0,0.9); 
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .plate-style { 
            width: 85%; height: 45%; background: url("background_color.jpg") center/cover no-repeat;
            border: 1px solid #8e9196; color: #ffffff; display: flex; align-items: center; justify-content: center; 
            text-transform: uppercase; font-weight: 900; 
            box-shadow: inset 0 0 0 1000px rgba(0,0,0,0.75); 
            font-size: 13px; letter-spacing: 1.5px;
            text-shadow: 2px 2px 0px #000, -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000;
        }

        /* --- WORKSPACE --- */
        .workspace { display: flex; justify-content: center; align-items: flex-start; padding: 20px; width: 100%; position: relative; gap: 0; }
        .stage { 
            width: 1050px; min-height: 700px; background: #1a1b1d; border: 8px solid #2c2e30;
            display: flex; justify-content: center; align-items: center; 
            box-shadow: 0 0 50px rgba(0,0,0,1); z-index: 10;
            transition: transform 1.2s cubic-bezier(0.19, 1, 0.22, 1); position: relative;
        }
        .workspace.active-glide .stage { transform: translateX(120px); }
        .room-img { position: absolute; width: 100%; height: 100%; object-fit: cover; display: none; z-index: 15; }

        /* --- CABINET & DRAWERS --- */
        .cabinet-container { 
            width: 0; opacity: 0; overflow: visible; position: relative; z-index: 200; 
            transform: translateX(-100px);
            transition: width 1.2s cubic-bezier(0.19, 1, 0.22, 1), opacity 1s ease, transform 1.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .workspace.active-glide .cabinet-container { width: 480px; opacity: 1; transform: translateX(0); }
        .cabinet-img { width: 480px; display: block; border-right: 2px solid rgba(255,255,255,0.2); }
        .cabinet-overlay { position: absolute; inset: 0; pointer-events: none; }

        .drawer-tab { 
            position: absolute; left: 50%; transform: translateX(-50%); 
            width: 155px; height: 75px; background: linear-gradient(135deg,#2c2e30 0%,#0f1011 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer;
            clip-path: polygon(0% 20%,8% 20%,8% 0%,92% 0%,92% 20%,100% 20%,100% 80%,92% 80%,92% 100%,8% 100%,8% 80%,0% 80%);
            pointer-events: auto; z-index: 210; border: 1px solid #ffffff33;
            box-shadow: 4px 4px 15px rgba(0,0,0,0.9);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .drawer-tab.opened { transform: translateX(-35%) scale(1.1); box-shadow: -20px 20px 30px rgba(0,0,0,0.8); z-index: 250; }
        .drw-1 { top: 110px; } .drw-2 { top: 220px; } .drw-3 { top: 330px; } .drw-4 { top: 440px; }

        /* --- FAN SYSTEM (FORCED VISIBILITY) --- */
        .fan-container { 
            position: absolute; 
            left: 100%; 
            top: 50%; 
            width: 300px; 
            height: 300px; 
            transform: translateY(-50%); 
            pointer-events: none; 
            z-index: 999 !important; /* Forces it to stay on top of EVERYTHING */
            display: block !important;
        }
        .fan-blade {
            position: absolute; left: 0; top: 40%; width: 210px; height: 60px; 
            background: linear-gradient(90deg, #0f1011 0%, #2c2e30 50%, #8e9196 100%);
            border-radius: 0 45px 45px 0; border-right: 4px solid #ffffff; 
            display: flex; align-items: center; justify-content: flex-end; padding-right: 15px;
            transform-origin: left center; opacity: 0;
            transition: width 0.6s ease, transform 1.2s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.8s ease;
        }
        .fan-blade.retract { width: 95px; }
        .fan-container.active .fan-blade { opacity: 1; pointer-events: auto; }
        .fan-container.active .blade-1 { transform: rotate(-45deg); }
        .fan-container.active .blade-2 { transform: rotate(-15deg); }
        .fan-container.active .blade-3 { transform: rotate(15deg); }
        .fan-container.active .blade-4 { transform: rotate(45deg); }

        .category-icon-img { width: 50px; height: 50px; object-fit: contain; cursor: pointer; filter: drop-shadow(0 0 15px white); }
        #id-upload { display: none; }
    </style>
</head>
<body>

<header class="site-header">
    <h1 class="brand-title">Room Glow Up</h1>
    <span class="sub-title">Your Dream Space Come To Life</span>
</header>

<input type="file" id="id-upload" accept="image/*">

<nav class="vintage-tabs">
    <div class="top-nav-tab" onclick="handleRoomsClick()"><div class="plate-style">Rooms</div></div>
    <div class="top-nav-tab"><div class="plate-style">Furniture</div></div>
    <div class="top-nav-tab"><div class="plate-style">Decor</div></div>
    <div class="top-nav-tab"><div class="plate-style">Inspiration</div></div>
</nav>

<div class="workspace" id="main-workspace">
    <div class="cabinet-container" id="cabinet">
        <img src="cabinet.png" class="cabinet-img" onerror="this.style.background='#1a1b1d'; this.style.height='600px';">
        <div class="cabinet-overlay" id="cab-content"></div>
    </div>
    <div class="stage"><img id="main-room" class="room-img"></div>
</div>

<script>
const workspace = document.getElementById('main-workspace');
const cabContent = document.getElementById('cab-content');
const mainRoom = document.getElementById('main-room');
const fileInput = document.getElementById('id-upload');

function handleRoomsClick() {
    workspace.classList.add('active-glide');
    cabContent.innerHTML = `
        <div class="drawer-tab drw-1" onclick="loadRoom('livingroom.jpg', this)"><div class="plate-style">Living Room</div></div>
        <div class="drawer-tab drw-2" onclick="loadRoom('bedroom.jpg', this)"><div class="plate-style">Bedroom</div></div>
        <div class="drawer-tab drw-3" onclick="loadRoom('diningroom.jpg', this)"><div class="plate-style">Dining Room</div></div>
        <div class="drawer-tab drw-4" onclick="fileInput.click()"><div class="plate-style">Upload</div></div>
    `;
}

function loadRoom(src, drawerElement) {
    console.log("Loading Room and Spawning Fan...");
    mainRoom.src = src;
    mainRoom.style.display = 'block';
    
    document.querySelectorAll('.drawer-tab').forEach(tab => tab.classList.remove('opened'));
    drawerElement.classList.add('opened');
    
    // REMOVE OLD FANS
    document.querySelectorAll('.fan-container').forEach(f => {
        f.parentNode.removeChild(f);
    });

    // SPAWN NEW FAN
    const fan = document.createElement('div');
    fan.className = 'fan-container';
    fan.innerHTML = `
        <div class="fan-blade blade-1"><img src="iconseating.jpg" class="category-icon-img" onclick="openFurniture('seating')"></div>
        <div class="fan-blade blade-2"><img src="iconbeds.jpg" class="category-icon-img" onclick="openFurniture('beds')"></div>
        <div class="fan-blade blade-3"><img src="iconstorage.jpg" class="category-icon-img" onclick="openFurniture('storage')"></div>
        <div class="fan-blade blade-4"><img src="icontables.jpg" class="category-icon-img" onclick="openFurniture('tables')"></div>
    `;
    
    // Attach to the DRAWER so it moves with it
    drawerElement.appendChild(fan);

    // Tiny delay to trigger CSS transition
    setTimeout(() => { 
        fan.classList.add('active'); 
        console.log("Fan is now ACTIVE");
    }, 100);
}

function openFurniture(cat) {
    console.log("Opening furniture category: " + cat);
    document.querySelectorAll('.fan-blade').forEach(b => b.classList.add('retract'));
}

fileInput.addEventListener('change', () => {
    const file = fileInput.files[0];
    if(file) {
        mainRoom.src = URL.createObjectURL(file);
        mainRoom.style.display = 'block';
    }
});
</script>

</body>
</html>
