<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Glow Up | Design & Shop</title>
    <link href="https://fonts.googleapis.com/css2?family=Limelight&family=Special+Elite&display=swap" rel="stylesheet">
    <style>
        /* --- CORE STYLES --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: #0f1011 url("background_color.jpg") center / cover fixed;
            min-height: 100vh; font-family: 'Special Elite', cursive; 
            overflow-x: hidden; display: flex; flex-direction: column; color: #fff;
        }

        /* --- HEADER & NAV --- */
        .site-header { text-align: center; padding: 30px 0 10px; z-index: 1000; }
        .brand-title {
            font-family: 'Limelight', cursive; font-size: clamp(45px, 8vw, 75px); text-transform: uppercase;
            background: linear-gradient(to bottom, #2c2e30 0%, #ffffff 45%, #ffffff 55%, #8e9196 70%, #161719 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.4)); letter-spacing: 6px;
        }
        .vintage-tabs { display: flex; justify-content: center; gap: 20px; padding: 10px 0 30px; }
        .top-nav-tab {
            width: 150px; height: 75px; background: linear-gradient(135deg, #2c2e30, #0f1011);
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            border: 2px solid #3a3d40; box-shadow: 0 6px 15px rgba(0,0,0,0.8);
            transition: 0.4s; border-radius: 4px;
        }
        .top-nav-tab:hover { transform: translateY(-8px); border-color: #fff; box-shadow: 0 0 15px white; }
        .plate-style { font-size: 11px; letter-spacing: 2px; text-transform: uppercase; }

        /* --- STAGE & CABINET --- */
        .workspace { display: flex; justify-content: center; align-items: center; flex: 1; position: relative; padding: 20px; }
        .stage { 
            width: 800px; height: 500px; background: #1a1b1d; border: 12px solid #2c2e30;
            position: relative; box-shadow: 0 0 60px black; z-index: 10;
            transition: transform 1.2s cubic-bezier(0.19, 1, 0.22, 1); border-radius: 12px; overflow: visible;
        }
        .workspace.active-glide .stage { transform: translateX(200px); }
        .room-img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; display: none; }

        .cabinet-container { 
            width: 0; opacity: 0; transform: translateX(-150px); 
            transition: 1.2s; position: absolute; left: 50px; z-index: 200;
        }
        .workspace.active-glide .cabinet-container { width: 450px; opacity: 1; transform: translateX(0); }
        .cabinet-img { width: 450px; display: block; filter: drop-shadow(10px 0 20px black); position: relative; z-index: 50; }
        
        #cab-content { position: absolute; inset: 0; z-index: 100; pointer-events: none; }
        .drawer-tab {
            position: absolute; left: 50%; transform: translateX(-50%); width: 160px; height: 80px; 
            background: linear-gradient(135deg, #2c2e30, #0f1011); border: 2px solid #3a3d40;
            cursor: pointer; pointer-events: auto; transition: 0.4s;
        }

        /* --- FAN PHYSICS --- */
        .fan-container { position: absolute; width: 300px; height: 300px; display: none; z-index: 300; pointer-events: none; }
        .fan-container.active { display: block; }
        .fan-blade {
            position: absolute; left: 0; top: 130px; width: 0; height: 40px; 
            background: linear-gradient(to right, #161719, #8e9196); border: 1px solid rgba(255,255,255,0.4);
            transform-origin: left center; opacity: 0; transition: 0.8s;
            display: flex; align-items: center; justify-content: flex-end; padding-right: 12px;
        }
        .fan-container.active .fan-blade { width: 160px; opacity: 1; pointer-events: auto; }
        .furn-fan.active .blade-1 { transform: rotate(-40deg); }
        .furn-fan.active .blade-2 { transform: rotate(-15deg); }
        .furn-fan.active .blade-3 { transform: rotate(15deg); }
        .furn-fan.active .blade-4 { transform: rotate(40deg); }

        /* Decor Fan (Top-Down) */
        .decor-fan-container { position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 400px; display: none; z-index: 500; }
        .decor-fan-container.active { display: block; }
        .decor-blade {
            position: absolute; top: 0; left: 50%; width: 50px; height: 0;
            background: linear-gradient(to bottom, #161719, #8e9196); transform-origin: top center;
            transition: 0.8s; opacity: 0; display: flex; align-items: flex-end; justify-content: center; padding-bottom: 10px;
        }
        .decor-fan-container.active .decor-blade { height: 160px; opacity: 1; pointer-events: auto; }
        .decor-fan-container.active .d-1 { transform: translateX(-50%) rotate(-45deg); }
        .decor-fan-container.active .d-2 { transform: translateX(-50%) rotate(-15deg); }
        .decor-fan-container.active .d-3 { transform: translateX(-50%) rotate(15deg); }
        .decor-fan-container.active .d-4 { transform: translateX(-50%) rotate(45deg); }

        /* Sub Fan Items */
        #sub-fan { z-index: 400; }
        .sub-blade { background: #fff; color: #000; border-radius: 0 40px 40px 0; transition: 0.9s; }
        #sub-fan.active .sub-blade { width: 320px; opacity: 1; pointer-events: auto; }
        #sub-fan.active .s-1 { transform: rotate(-60deg); } #sub-fan.active .s-2 { transform: rotate(-45deg); }
        #sub-fan.active .s-3 { transform: rotate(-30deg); } #sub-fan.active .s-4 { transform: rotate(-15deg); }

        .category-icon-img { width: 28px; height: 28px; filter: drop-shadow(0 0 5px white); cursor: pointer; }
        .furn-item-img { width: 65px; height: 45px; object-fit: contain; cursor: grab; }
        .placed-furniture { position: absolute; cursor: move; z-index: 60; max-width: 150px; }
        
        /* Save Panel */
        .side-panel { position: fixed; right: -300px; top: 0; width: 300px; height: 100%; background: #161719; border-left: 2px solid #3a3d40; padding: 20px; transition: 0.5s; z-index: 2000; }
        .side-panel.open { right: 0; }
    </style>
</head>
<body>

<header class="site-header">
    <h1 class="brand-title">Room Glow Up</h1>
</header>

<nav class="vintage-tabs">
    <div class="top-nav-tab" onclick="handleRoomsClick()"><div class="plate-style">Rooms</div></div>
    <div class="top-nav-tab" onclick="toggleDecorFan()"><div class="plate-style">Decor</div></div>
    <div class="top-nav-tab" onclick="toggleSavePanel()"><div class="plate-style">Save/Load</div></div>
</nav>

<div class="workspace" id="main-workspace">
    <div class="cabinet-container" id="cab-anchor">
        <img src="cabinet.png" class="cabinet-img">
        <div id="cab-content"></div>
        <div id="global-fan" class="fan-container furn-fan">
            <div class="fan-blade blade-1"><img src="iconseating.png" class="category-icon-img" onclick="openSubFan('seating')"></div>
            <div class="fan-blade blade-2"><img src="iconbeds.png" class="category-icon-img" onclick="openSubFan('beds')"></div>
            <div class="fan-blade blade-3"><img src="iconstorage.png" class="category-icon-img" onclick="openSubFan('storage')"></div>
            <div class="fan-blade blade-4"><img src="icontable.png" class="category-icon-img" onclick="openSubFan('tables')"></div>
        </div>
        <div id="sub-fan" class="fan-container">
            <div class="fan-blade sub-blade s-1"></div><div class="fan-blade sub-blade s-2"></div>
            <div class="fan-blade sub-blade s-3"></div><div class="fan-blade sub-blade s-4"></div>
        </div>
    </div>

    <div class="stage" id="drop-zone">
        <div id="decor-fan" class="decor-fan-container">
            <div class="decor-blade d-1" onclick="openSubFan('rugs')">Rugs</div>
            <div class="decor-blade d-2" onclick="openSubFan('lamps')">Lamps</div>
            <div class="decor-blade d-3">Art</div>
            <div class="decor-blade d-4">Curtains</div>
        </div>
        <img id="main-room" class="room-img">
    </div>
</div>

<div id="save-panel" class="side-panel">
    <h3>Design Saved</h3>
    <button onclick="saveCurrentDesign()" style="padding:10px; margin-top:20px;">Save Now</button>
    <button onclick="toggleSavePanel()" style="padding:10px; margin-top:10px;">Close</button>
</div>

<script>
const workspace = document.getElementById('main-workspace');
const cabContent = document.getElementById('cab-content');
const mainRoom = document.getElementById('main-room');
const fan = document.getElementById('global-fan');
const subFan = document.getElementById('sub-fan');
const decorFan = document.getElementById('decor-fan');
const dropZone = document.getElementById('drop-zone');

function handleRoomsClick() {
    workspace.classList.add('active-glide');
    cabContent.innerHTML = `
        <div class="drawer-tab" style="top:80px" onclick="selectRoom('livingroom.jpg', this)"><div class="plate-style">Living Room</div></div>
        <div class="drawer-tab" style="top:180px" onclick="selectRoom('bedroom.jpg', this)"><div class="plate-style">Bedroom</div></div>
    `;
}

function selectRoom(src, el) {
    mainRoom.src = src; mainRoom.style.display = 'block';
    fan.classList.remove('active'); subFan.classList.remove('active');
    const rect = el.getBoundingClientRect();
    const anchor = document.getElementById('cab-anchor').getBoundingClientRect();
    fan.style.top = (rect.top - anchor.top + 40 - 150) + "px";
    fan.style.left = (rect.right - anchor.left - 20) + "px";
    setTimeout(() => fan.classList.add('active'), 50);
}

function toggleDecorFan() { decorFan.classList.toggle('active'); }
function toggleSavePanel() { document.getElementById('save-panel').classList.toggle('open'); }

function openSubFan(cat) {
    subFan.classList.remove('active');
    subFan.style.top = fan.style.top;
    subFan.style.left = (parseInt(fan.style.left) + 60) + "px";
    const storage = ['storage_shelf.png', 'storage_grnshelf.png', 'storage_dresser_drkbrn.png'];
    const blades = document.querySelectorAll('.sub-blade');
    blades.forEach((b, i) => {
        let img = (cat === 'storage' && storage[i]) ? storage[i] : `furn_${cat}_${i}.png`;
        b.innerHTML = `<img src="${img}" class="furn-item-img" draggable="true" ondragstart="ev => ev.dataTransfer.setData('src', ev.target.src)">`;
        b.firstChild.ondragstart = e => e.dataTransfer.setData("src", e.target.src);
    });
    setTimeout(() => subFan.classList.add('active'), 50);
}

dropZone.ondragover = e => e.preventDefault();
dropZone.ondrop = e => {
    e.preventDefault();
    const rect = dropZone.getBoundingClientRect();
    const img = document.createElement('img');
    img.src = e.dataTransfer.getData("src");
    img.className = "placed-furniture";
    img.style.left = (e.clientX - rect.left - 40) + "px";
    img.style.top = (e.clientY - rect.top - 20) + "px";
    img.onmousedown = ev => {
        let sX = ev.clientX - img.offsetLeft, sY = ev.clientY - img.offsetTop;
        document.onmousemove = m => {
            img.style.left = (m.clientX - sX) + 'px';
            img.style.top = (m.clientY - sY) + 'px';
        };
        document.onmouseup = () => document.onmousemove = null;
    };
    dropZone.appendChild(img);
};

function saveCurrentDesign() { alert("Design layout captured!"); }
</script>
</body>
</html>
